<?xml version="1.0"?>
<implementation>
    <settings>
        <protocol>raw</protocol>

</settings>
  <functions>

    function lug_startup(lul_device) 
	 luup.log("Melanie #" .. lul_device .. " demarrage " )
      MelcloudPlugin = require("L_Melcloud1")
	 
      MelcloudPlugin.mlStartup(lul_device)
	  watchHandler = MelcloudPlugin.watchHandler
	luup.log("Melanie #" .. lul_device .. " fin de demarrage " )
	return true
    end

  </functions>	
  <startup>lug_startup</startup>
  <actionList>
		<action>
			<serviceId>urn:upnp-org:serviceId:SwitchPower1</serviceId>
			<name>SetTarget</name>
			<run>
				MelcloudPlugin.actionSetTarget(lul_device)
			</run>
		</action>
		<action>
			<serviceId>urn:upnp-org:serviceId:HVAC_UserOperatingMode1</serviceId>
			<name>SetModeTarget</name>
			<run>
				MelcloudPlugin.SetModeTarget(lul_device, lul_settings)
			</run>
		</action>
		<action>
			<serviceId>urn:upnp-org:serviceId:TemperatureSetpoint1</serviceId>
			<name>SetCurrentSetpoint</name>
			<run>
				MelcloudPlugin.SetPoint(lul_device, lul_settings)
			</run>
		</action>
		<action>
			<serviceId>urn:upnp-org:serviceId:TemperatureSetpoint1</serviceId>
			<name>GetCurrentSetpoint</name>
			<run>

			return true
			</run>
		</action>
	</actionList>


</implementation>
